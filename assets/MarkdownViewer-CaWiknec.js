import{j as i,r as S,R}from"./vendor-react-DQm72ddU.js";import{c as _}from"./index-xz6nLyQS.js";const y=/^```(\w*)/,j=/^(#{1,6})\s+(.+)/,u=/^[\s]*[-*+]\s/,x=/^[\s]*\d+\.\s/,b=/^(---|\*\*\*|___)$/,m=/!\[([^\]]*)\]\(([^)]+)\)|\[([^\]]*)\]\(([^)]+)\)|`([^`]+)`|\*\*(.+?)\*\*|\*(.+?)\*|~~(.+?)~~/g,z=/^[a-zA-Z][a-zA-Z\d+.-]*:/,L=new Set(["http:","https:","mailto:"]),M=new Set(["http:","https:"]);function h(r){const t=r.trim().replace(/^\|/,"").replace(/\|$/,"");return t.includes("|")?t.split("|").map(n=>n.trim()):[t.trim()]}function H(r){if(!r.includes("|"))return!1;const t=h(r);return t.length>=2&&t.every(n=>/^:?-{3,}:?$/.test(n))}function w(r,t){if(!t||!r.includes("|"))return!1;const n=h(r),e=h(t);return n.length>=2&&e.length===n.length&&H(t)}function T(r,t){const n=r.trim();return n===""||y.test(r)||j.test(r)||u.test(r)||x.test(r)||r.startsWith(">")||b.test(n)||w(r,t)}function W(r){const t=[],n=r.split(`
`);let e=0;for(;e<n.length;){const s=n[e],a=s.match(y);if(a){const o=a[1]||void 0,p=[];for(e++;e<n.length&&!n[e].startsWith("```");)p.push(n[e]),e++;e++,t.push({type:"code",content:p.join(`
`),lang:o});continue}const l=s.match(j);if(l){t.push({type:"heading",level:l[1].length,content:l[2]}),e++;continue}if(b.test(s.trim())){t.push({type:"hr"}),e++;continue}if(w(s,n[e+1])){const o=h(s);e+=2;const p=[];for(;e<n.length&&n[e].includes("|");){const g=h(n[e]);if(g.length<2)break;const f=[...g.slice(0,o.length)];for(;f.length<o.length;)f.push("");p.push(f),e++}t.push({type:"table",headers:o,cells:p});continue}if(u.test(s)){const o=[];for(;e<n.length&&u.test(n[e]);)o.push(n[e].replace(u,"")),e++;t.push({type:"list",items:o,ordered:!1});continue}if(x.test(s)){const o=[];for(;e<n.length&&x.test(n[e]);)o.push(n[e].replace(x,"")),e++;t.push({type:"list",items:o,ordered:!0});continue}if(s.startsWith(">")){const o=[];for(;e<n.length&&n[e].startsWith(">");)o.push(n[e].replace(/^>\s?/,"")),e++;t.push({type:"blockquote",content:o.join(`
`)});continue}if(s.trim()===""){e++;continue}const d=[];for(;e<n.length&&!T(n[e],n[e+1]);)d.push(n[e]),e++;d.length>0&&t.push({type:"paragraph",content:d.join(" ")})}return t}function v(r,t){const n=r.trim();if(!n||n.startsWith("//"))return null;if(z.test(n))try{const e=new URL(n);return t.has(e.protocol)?n:null}catch{return null}return n}function c(r){const t=[];m.lastIndex=0;let n=0,e;for(;(e=m.exec(r))!==null;){if(e.index>n&&t.push(r.slice(n,e.index)),e[1]!==void 0){const s=v(e[2],M);s?t.push(i.jsx("img",{src:s,alt:e[1],style:{maxWidth:"100%",borderRadius:"8px",margin:"4px 0"}},e.index)):t.push(e[1])}else if(e[3]!==void 0){const s=v(e[4],L);s?t.push(i.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--p500)",textDecoration:"underline",textUnderlineOffset:"2px"},children:e[3]},e.index)):t.push(e[3])}else e[5]!==void 0?t.push(i.jsx("code",{style:{fontFamily:"var(--mono)",fontSize:"0.9em",padding:"1px 6px",borderRadius:"4px",background:"rgba(var(--gl), .08)",color:"var(--p600)"},children:e[5]},e.index)):e[6]!==void 0?t.push(i.jsx("strong",{children:e[6]},e.index)):e[7]!==void 0?t.push(i.jsx("em",{children:e[7]},e.index)):e[8]!==void 0&&t.push(i.jsx("del",{style:{opacity:.6},children:e[8]},e.index));n=e.index+e[0].length}return n<r.length&&t.push(r.slice(n)),t}const E=R.memo(function({token:t}){var n;switch(t.type){case"heading":{const s={1:"1.6em",2:"1.35em",3:"1.15em",4:"1em",5:"0.9em",6:"0.85em"},a={1:300,2:300,3:200,4:200,5:200,6:200},l=t.level;return i.jsx("div",{style:{fontSize:s[l]??"1em",fontWeight:a[l]??300,color:"var(--t1)",margin:`${l<=2?"20px":"14px"} 0 8px`,letterSpacing:l<=2?"-.3px":void 0,borderBottom:l<=2?"1px solid var(--div)":void 0,paddingBottom:l<=2?"6px":void 0},children:c(t.content)})}case"paragraph":return i.jsx("p",{style:{margin:"8px 0",lineHeight:1.7,color:"var(--t2)"},children:c(t.content)});case"code":return i.jsxs("pre",{style:{fontFamily:"var(--mono)",fontSize:"12px",lineHeight:1.6,padding:"14px 16px",borderRadius:"10px",background:"rgba(var(--gl), .06)",color:"var(--t2)",overflow:"auto",margin:"10px 0",border:"1px solid var(--div)"},children:[!!t.lang&&i.jsx("div",{style:{fontSize:"10px",fontWeight:300,color:"var(--t4)",textTransform:"uppercase",letterSpacing:".5px",marginBottom:"8px"},children:t.lang}),i.jsx("code",{children:t.content})]});case"list":const e=t.ordered?"ol":"ul";return i.jsx(e,{style:{margin:"8px 0",paddingLeft:"24px",lineHeight:1.7,color:"var(--t2)"},children:t.items.map((s,a)=>i.jsx("li",{style:{margin:"3px 0"},children:c(s)},a))});case"blockquote":return i.jsx("blockquote",{style:{margin:"10px 0",paddingLeft:"16px",borderLeft:"3px solid var(--p400)",color:"var(--t3)",fontStyle:"italic",lineHeight:1.7},children:c(t.content)});case"hr":return i.jsx("hr",{style:{border:"none",borderTop:"1px solid var(--div)",margin:"16px 0"}});case"table":return i.jsx("div",{style:{overflowX:"auto",margin:"10px 0"},children:i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[i.jsx("thead",{children:i.jsx("tr",{children:(n=t.headers)==null?void 0:n.map((s,a)=>i.jsx("th",{style:{textAlign:"left",padding:"8px 12px",fontSize:"11px",fontWeight:300,color:"var(--t3)",borderBottom:"2px solid var(--div)"},children:c(s)},a))})}),i.jsx("tbody",{children:t.cells.map((s,a)=>i.jsx("tr",{children:s.map((l,d)=>i.jsx("td",{style:{padding:"8px 12px",borderBottom:"1px solid var(--div)",color:"var(--t2)"},children:c(l)},d))},a))})]})});default:return null}});E.displayName="TokenRenderer";function B({content:r,className:t}){const n=S.useMemo(()=>W(r),[r]);return i.jsx("div",{className:_(t),style:{fontSize:"14px",fontFamily:"var(--font)",color:"var(--t1)"},children:n.map((e,s)=>i.jsx(E,{token:e},s))})}export{B as M};
