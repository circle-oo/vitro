import{r as T,j as t,a as R}from"./index-DD6_U3hE.js";import{z as F,K as L,X as $,Y as k,M as H,E,R as O,N as X,O as K,P as A,Q as z,H as J,I as N}from"./chartShared-DhxjTDuX.js";var P=F({chartName:"BarChart",GraphicalChild:L,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:$},{axisType:"yAxis",AxisComp:k}],formatAxisMap:H});function et({data:o,dataKey:i,xKey:a,height:s=200,gradientId:f}){const l=T.useId().replace(/:/g,""),u=f??`vitroBarGrad-${l}`,d=E();return t.jsx(O,{width:"100%",height:s,children:t.jsxs(P,{data:o,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:u,x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:d.primary,stopOpacity:1}),t.jsx("stop",{offset:"100%",stopColor:d.primary,stopOpacity:.5})]})}),t.jsx(X,{...K(d)}),t.jsx($,{dataKey:a,tick:A(d)}),t.jsx(k,{tick:A(d),width:z}),t.jsx(J,{contentStyle:N(d.mode),itemStyle:{color:d.mode==="light"?"#111827":"#F8FAFC",fontSize:12,fontWeight:600},labelStyle:{color:d.mode==="light"?"#6B7280":"#CBD5E1",fontSize:11,fontWeight:600}}),t.jsx(L,{dataKey:i,fill:`url(#${u})`,radius:[4,4,0,0]})]})})}const Q=["","Mon","","Wed","","Fri",""],S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(o){const i=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),s=String(o.getDate()).padStart(2,"0");return`${i}-${a}-${s}`}function q(o){const i=o.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!i)return null;const a=Number(i[1]),s=Number(i[2])-1,f=Number(i[3]),l=new Date(a,s,f);return Number.isNaN(l.getTime())||l.getFullYear()!==a||l.getMonth()!==s||l.getDate()!==f?null:l}function G(o,i){if(o<=0||i<=0)return 0;const a=o/i;return a<=.25?1:a<=.5?2:a<=.75?3:4}function at({data:o,summary:i,cellSize:a=13,cellGap:s=3,className:f}){const[l,u]=T.useState(null),d=E(),{grid:b,monthLabels:V,maxVal:W}=T.useMemo(()=>{if(o.length===0)return{grid:[],monthLabels:[],maxVal:0};const r=new Map;let c=0;const x=[];for(const e of o){const n=q(e.date);if(!n)continue;const p=I(n);r.set(p,e.value),e.value>c&&(c=e.value),x.push(n)}if(x.length===0)return{grid:[],monthLabels:[],maxVal:0};const g=new Date(Math.min(...x.map(e=>e.getTime()))),h=new Date(Math.max(...x.map(e=>e.getTime()))),m=new Date(g);m.setDate(m.getDate()-m.getDay());const D=new Date(h);D.setDate(D.getDate()+(6-D.getDay()));const C=[],y=new Date(m);for(;y<=D;){const e=[];for(let n=0;n<7;n++){const p=I(y);e.push({date:new Date(y),key:p,value:r.get(p)??0}),y.setDate(y.getDate()+1)}C.push(e)}const j=new Map;let v=-1;C.forEach((e,n)=>{e.forEach(p=>{p.date>=g&&p.date<=h&&(v<0&&(v=n),p.date.getDate()===1&&j.set(n,S[p.date.getMonth()]))})}),v>=0&&!j.has(v)&&j.set(v,S[g.getMonth()]);const B=Array.from(j.entries()).map(([e,n])=>({weekIndex:e,label:n})).sort((e,n)=>e.weekIndex-n.weekIndex),M=[];for(const e of B){const n=M[M.length-1];(!n||e.weekIndex-n.weekIndex>=2)&&M.push(e)}return{grid:C,monthLabels:M,maxVal:c}},[o]),Y=b.length,w=32,_=Math.max(0,Y*(a+s)-s);return t.jsxs("div",{className:f,children:[t.jsx("div",{style:{display:"flex",marginLeft:w+s,marginBottom:"4px",position:"relative",height:"16px",width:_},children:V.map((r,c)=>t.jsx("span",{style:{position:"absolute",left:r.weekIndex*(a+s),fontSize:"11px",color:"var(--t4)",fontWeight:500},children:r.label},`${r.label}-${c}`))}),t.jsxs("div",{style:{display:"flex",gap:`${s}px`},children:[t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:`${s}px`,width:w,flexShrink:0},children:Q.map((r,c)=>t.jsx("div",{style:{height:a,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"6px",fontSize:"11px",color:"var(--t4)",fontWeight:500},children:r},c))}),b.map((r,c)=>t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:`${s}px`},children:r.map(x=>{const g=G(x.value,W);return t.jsx("div",{className:`hmc hm${g}`,style:{width:a,height:a},onMouseEnter:h=>u({x:h.clientX,y:h.clientY,text:`${x.value} on ${x.key}`}),onMouseMove:h=>u(m=>m?{...m,x:h.clientX,y:h.clientY}:null),onMouseLeave:()=>u(null)},x.key)})},c))]}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"12px",flexWrap:"wrap",marginTop:"10px",marginLeft:w+s},children:[i&&t.jsx("span",{style:{fontSize:"11px",color:"var(--t4)"},children:i}),t.jsxs("div",{className:"hmleg",children:[t.jsx("span",{children:"Less"}),[0,1,2,3,4].map(r=>t.jsx("i",{className:`hm${r}`},r)),t.jsx("span",{children:"More"})]})]}),l&&R.createPortal(t.jsx("div",{style:{position:"fixed",zIndex:999,fontFamily:"var(--font)",pointerEvents:"none",whiteSpace:"nowrap",left:l.x+12,top:l.y-32,...N(d.mode)},children:l.text}),document.body)]})}export{at as V,et as a};
