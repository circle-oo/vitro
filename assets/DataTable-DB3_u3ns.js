import{r as m,j as s}from"./vendor-react-DQm72ddU.js";import{C as k}from"./Checkbox-C8L1aTFi.js";import{s as a,f as y}from"./index-B4XNLYhp.js";function V(r){if(typeof r=="number")return Number.isFinite(r)?r:Number.NEGATIVE_INFINITY;if(r instanceof Date)return r.getTime();if(typeof r=="boolean")return r?1:0;if(r==null)return"";const n=String(r).trim();if(!n)return"";const i=Number(n);if(!Number.isNaN(i))return i;const d=Date.parse(n);return Number.isNaN(d)?n.toLowerCase():d}function z(r,n){const i=V(r),d=V(n);return typeof i=="number"&&typeof d=="number"?i-d:String(i).localeCompare(String(d))}function B({columns:r,data:n,rowKey:i,selectable:d=!1,selectedKeys:g=new Set,onSelectionChange:p,onRowClick:x,className:v}){const[u,S]=m.useState(null),[b,h]=m.useState("asc"),c=m.useMemo(()=>r.find(t=>t.key===u),[r,u]),f=m.useMemo(()=>n.map(t=>({row:t,key:i(t)})),[n,i]),$=m.useMemo(()=>{if(!u||!c)return f;const t=c.sortValue?c.sortValue:e=>e[u],o=c.sortCompare??z,l=f.map(e=>({entry:e,sortValue:t(e.row)}));return l.sort((e,w)=>{const N=o(e.sortValue,w.sortValue);return b==="asc"?N:-N}),l.map(e=>e.entry)},[f,u,b,c]),E=t=>{u===t?h(o=>o==="asc"?"desc":"asc"):(S(t),h("asc"))},j=f.length>0&&f.every(t=>g.has(t.key)),D=()=>{j?p==null||p(new Set):p==null||p(new Set(f.map(t=>t.key)))},T=t=>{const o=new Set(g);o.has(t)?o.delete(t):o.add(t),p==null||p(o)};return s.jsx("div",{style:{overflowX:"auto"},className:v,children:s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:y(13)},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[d&&s.jsx("th",{style:{width:a(40),padding:`${a(12)} ${a(16)}`},children:s.jsx("div",{onClick:t=>t.stopPropagation(),children:s.jsx(k,{checked:j,onChange:D})})}),r.map(t=>s.jsxs("th",{onClick:()=>t.sortable!==!1&&E(t.key),"aria-sort":t.sortable===!1?void 0:u===t.key?b==="asc"?"ascending":"descending":"none",style:{textAlign:"left",padding:`${a(12)} ${a(16)}`,fontSize:y(12),fontWeight:100,textTransform:"uppercase",letterSpacing:".6px",color:"var(--t2)",borderBottom:"1px solid var(--div)",cursor:t.sortable!==!1?"pointer":"default",userSelect:"none",whiteSpace:"nowrap"},children:[t.header,u===t.key&&s.jsx("span",{style:{marginLeft:a(4),fontSize:y(10),color:"var(--p500)"},children:b==="asc"?"▲":"▼"})]},t.key))]})}),s.jsx("tbody",{children:$.map(({row:t,key:o})=>{const l=g.has(o);return s.jsxs("tr",{onClick:()=>x==null?void 0:x(t),style:{cursor:x?"pointer":void 0,background:l?"rgba(var(--gl), .10)":void 0},children:[d&&s.jsx("td",{style:{padding:`${a(12)} ${a(16)}`,borderBottom:"1px solid var(--div)"},onClick:e=>e.stopPropagation(),children:s.jsx(k,{checked:l,onChange:()=>T(o)})}),r.map(e=>s.jsx("td",{style:{padding:`${a(12)} ${a(16)}`,borderBottom:"1px solid var(--div)",transition:"background .1s"},children:e.render?e.render(t):String(t[e.key]??"")},e.key))]},o)})})]})})}export{B as D};
