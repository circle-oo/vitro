import{j as i,r as w,c as E}from"./index-DD6_U3hE.js";const v=/^```(\w*)/,y=/^(#{1,6})\s+(.+)/,h=/^[\s]*[-*+]\s/,u=/^[\s]*\d+\.\s/,j=/^(---|\*\*\*|___)$/,S=/!\[([^\]]*)\]\(([^)]+)\)|\[([^\]]*)\]\(([^)]+)\)|`([^`]+)`|\*\*(.+?)\*\*|\*(.+?)\*|~~(.+?)~~/g,R=/^[a-zA-Z][a-zA-Z\d+.-]*:/,_=new Set(["http:","https:","mailto:"]),z=new Set(["http:","https:"]);function p(r){const n=r.trim().replace(/^\|/,"").replace(/\|$/,"");return n.includes("|")?n.split("|").map(t=>t.trim()):[n.trim()]}function L(r){if(!r.includes("|"))return!1;const n=p(r);return n.length>=2&&n.every(t=>/^:?-{3,}:?$/.test(t))}function b(r,n){if(!n||!r.includes("|"))return!1;const t=p(r),e=p(n);return t.length>=2&&e.length===t.length&&L(n)}function M(r,n){const t=r.trim();return t===""||v.test(r)||y.test(r)||h.test(r)||u.test(r)||r.startsWith(">")||j.test(t)||b(r,n)}function H(r){const n=[],t=r.split(`
`);let e=0;for(;e<t.length;){const s=t[e],l=s.match(v);if(l){const o=l[1]||void 0,d=[];for(e++;e<t.length&&!t[e].startsWith("```");)d.push(t[e]),e++;e++,n.push({type:"code",content:d.join(`
`),lang:o});continue}const c=s.match(y);if(c){n.push({type:"heading",level:c[1].length,content:c[2]}),e++;continue}if(j.test(s.trim())){n.push({type:"hr"}),e++;continue}if(b(s,t[e+1])){const o=p(s);e+=2;const d=[];for(;e<t.length&&t[e].includes("|");){const g=p(t[e]);if(g.length<2)break;const f=[...g.slice(0,o.length)];for(;f.length<o.length;)f.push("");d.push(f),e++}n.push({type:"table",headers:o,cells:d});continue}if(h.test(s)){const o=[];for(;e<t.length&&h.test(t[e]);)o.push(t[e].replace(h,"")),e++;n.push({type:"list",items:o,ordered:!1});continue}if(u.test(s)){const o=[];for(;e<t.length&&u.test(t[e]);)o.push(t[e].replace(u,"")),e++;n.push({type:"list",items:o,ordered:!0});continue}if(s.startsWith(">")){const o=[];for(;e<t.length&&t[e].startsWith(">");)o.push(t[e].replace(/^>\s?/,"")),e++;n.push({type:"blockquote",content:o.join(`
`)});continue}if(s.trim()===""){e++;continue}const x=[];for(;e<t.length&&!M(t[e],t[e+1]);)x.push(t[e]),e++;x.length>0&&n.push({type:"paragraph",content:x.join(" ")})}return n}function m(r,n){const t=r.trim();if(!t||t.startsWith("//"))return null;if(R.test(t))try{const e=new URL(t);return n.has(e.protocol)?t:null}catch{return null}return t}function a(r){const n=[];let t=0,e;for(;(e=S.exec(r))!==null;){if(e.index>t&&n.push(r.slice(t,e.index)),e[1]!==void 0){const s=m(e[2],z);s?n.push(i.jsx("img",{src:s,alt:e[1],style:{maxWidth:"100%",borderRadius:"8px",margin:"4px 0"}},e.index)):n.push(e[1])}else if(e[3]!==void 0){const s=m(e[4],_);s?n.push(i.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--p500)",textDecoration:"underline",textUnderlineOffset:"2px"},children:e[3]},e.index)):n.push(e[3])}else e[5]!==void 0?n.push(i.jsx("code",{style:{fontFamily:"var(--mono)",fontSize:"0.9em",padding:"1px 6px",borderRadius:"4px",background:"rgba(var(--gl), .08)",color:"var(--p600)"},children:e[5]},e.index)):e[6]!==void 0?n.push(i.jsx("strong",{children:e[6]},e.index)):e[7]!==void 0?n.push(i.jsx("em",{children:e[7]},e.index)):e[8]!==void 0&&n.push(i.jsx("del",{style:{opacity:.6},children:e[8]},e.index));t=e.index+e[0].length}return t<r.length&&n.push(r.slice(t)),n}function W({token:r}){var n;switch(r.type){case"heading":{const e={1:"1.6em",2:"1.35em",3:"1.15em",4:"1em",5:"0.9em",6:"0.85em"},s={1:700,2:700,3:600,4:600,5:600,6:600},l=r.level;return i.jsx("div",{style:{fontSize:e[l]??"1em",fontWeight:s[l]??600,color:"var(--t1)",margin:`${l<=2?"20px":"14px"} 0 8px`,letterSpacing:l<=2?"-.3px":void 0,borderBottom:l<=2?"1px solid var(--div)":void 0,paddingBottom:l<=2?"6px":void 0},children:a(r.content)})}case"paragraph":return i.jsx("p",{style:{margin:"8px 0",lineHeight:1.7,color:"var(--t2)"},children:a(r.content)});case"code":return i.jsxs("pre",{style:{fontFamily:"var(--mono)",fontSize:"12px",lineHeight:1.6,padding:"14px 16px",borderRadius:"10px",background:"rgba(var(--gl), .06)",color:"var(--t2)",overflow:"auto",margin:"10px 0",border:"1px solid var(--div)"},children:[!!r.lang&&i.jsx("div",{style:{fontSize:"10px",fontWeight:600,color:"var(--t4)",textTransform:"uppercase",letterSpacing:".5px",marginBottom:"8px"},children:r.lang}),i.jsx("code",{children:r.content})]});case"list":const t=r.ordered?"ol":"ul";return i.jsx(t,{style:{margin:"8px 0",paddingLeft:"24px",lineHeight:1.7,color:"var(--t2)"},children:r.items.map((e,s)=>i.jsx("li",{style:{margin:"3px 0"},children:a(e)},s))});case"blockquote":return i.jsx("blockquote",{style:{margin:"10px 0",paddingLeft:"16px",borderLeft:"3px solid var(--p400)",color:"var(--t3)",fontStyle:"italic",lineHeight:1.7},children:a(r.content)});case"hr":return i.jsx("hr",{style:{border:"none",borderTop:"1px solid var(--div)",margin:"16px 0"}});case"table":return i.jsx("div",{style:{overflowX:"auto",margin:"10px 0"},children:i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[i.jsx("thead",{children:i.jsx("tr",{children:(n=r.headers)==null?void 0:n.map((e,s)=>i.jsx("th",{style:{textAlign:"left",padding:"8px 12px",fontSize:"11px",fontWeight:600,color:"var(--t3)",borderBottom:"2px solid var(--div)"},children:a(e)},s))})}),i.jsx("tbody",{children:r.cells.map((e,s)=>i.jsx("tr",{children:e.map((l,c)=>i.jsx("td",{style:{padding:"8px 12px",borderBottom:"1px solid var(--div)",color:"var(--t2)"},children:a(l)},c))},s))})]})});default:return null}}function B({content:r,className:n}){const t=w.useMemo(()=>H(r),[r]);return i.jsx("div",{className:E(n),style:{fontSize:"14px",fontFamily:"var(--font)",color:"var(--t1)"},children:t.map((e,s)=>i.jsx(W,{token:e},s))})}export{B as M};
