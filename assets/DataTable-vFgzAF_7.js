import{r as l,j as e}from"./index-DD6_U3hE.js";import{C as h}from"./Checkbox-DleRlDBF.js";function j(t){if(typeof t=="number")return Number.isFinite(t)?t:Number.NEGATIVE_INFINITY;if(t instanceof Date)return t.getTime();if(typeof t=="boolean")return t?1:0;if(t==null)return"";const s=String(t).trim();if(!s)return"";const i=Number(s);if(!Number.isNaN(i))return i;const n=Date.parse(s);return Number.isNaN(n)?s.toLowerCase():n}function T(t,s){const i=j(t),n=j(s);return typeof i=="number"&&typeof n=="number"?i-n:String(i).localeCompare(String(n))}function I({columns:t,data:s,rowKey:i,selectable:n=!1,selectedKeys:m=new Set,onSelectionChange:a,onRowClick:f,className:N}){const[p,k]=l.useState(null),[u,b]=l.useState("asc"),c=l.useMemo(()=>t.find(r=>r.key===p),[t,p]),v=l.useMemo(()=>{if(!p||!c)return s;const r=c.sortValue?c.sortValue:x=>x[p],o=c.sortCompare??T;return[...s].sort((x,d)=>{const y=o(r(x),r(d));return u==="asc"?y:-y})},[s,p,u,c]),S=r=>{p===r?b(o=>o==="asc"?"desc":"asc"):(k(r),b("asc"))},g=s.length>0&&s.every(r=>m.has(i(r))),D=()=>{g?a==null||a(new Set):a==null||a(new Set(s.map(i)))},V=r=>{const o=new Set(m);o.has(r)?o.delete(r):o.add(r),a==null||a(o)};return e.jsx("div",{style:{overflowX:"auto"},className:N,children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[n&&e.jsx("th",{style:{width:"40px",padding:"12px 16px"},children:e.jsx("div",{onClick:r=>r.stopPropagation(),children:e.jsx(h,{checked:g,onChange:D})})}),t.map(r=>e.jsxs("th",{onClick:()=>r.sortable!==!1&&S(r.key),"aria-sort":r.sortable===!1?void 0:p===r.key?u==="asc"?"ascending":"descending":"none",style:{textAlign:"left",padding:"12px 16px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:".5px",color:"var(--t3)",borderBottom:"1px solid var(--div)",cursor:r.sortable!==!1?"pointer":"default",userSelect:"none",whiteSpace:"nowrap"},children:[r.header,p===r.key&&e.jsx("span",{style:{marginLeft:"4px",fontSize:"10px",color:"var(--p500)"},children:u==="asc"?"▲":"▼"})]},r.key))]})}),e.jsx("tbody",{children:v.map(r=>{const o=i(r),x=m.has(o);return e.jsxs("tr",{onClick:()=>f==null?void 0:f(r),style:{cursor:f?"pointer":void 0,background:x?"rgba(var(--gl), .10)":void 0},children:[n&&e.jsx("td",{style:{padding:"12px 16px",borderBottom:"1px solid var(--div)"},onClick:d=>d.stopPropagation(),children:e.jsx(h,{checked:x,onChange:()=>V(o)})}),t.map(d=>e.jsx("td",{style:{padding:"12px 16px",borderBottom:"1px solid var(--div)",transition:"background .1s"},children:d.render?d.render(r):String(r[d.key]??"")},d.key))]},o)})})]})})}export{I as D};
